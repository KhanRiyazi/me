<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Fast & Furious Math — Gold / Silver / Diamond</title>
    <style>
        :root {
            --bg: #0f1724;
            --card: #0b1220;
            --muted: #94a3b8;
            --accent: #7c3aed;
            --gold: #f59e0b;
            --silver: #9ca3af;
            --diamond: #06b6d4;
            --glass: rgba(255, 255, 255, 0.04);
            --radius: 14px;
            --glass-2: rgba(255, 255, 255, 0.02);
        }

        * {
            box-sizing: border-box
        }

        body {
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            margin: 0;
            background: linear-gradient(180deg, #061021 0%, #071526 60%);
            color: #e6eef8;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px
        }

        .wrap {
            width: 100%;
            max-width: 1100px
        }

        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px
        }

        .logo {
            width: 56px;
            height: 56px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--accent), #3b82f6);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.6)
        }

        h1 {
            font-size: 20px;
            margin: 0
        }

        p.lead {
            margin: 0;
            color: var(--muted);
            font-size: 13px
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 20px;
            margin-top: 22px
        }

        .panel {
            background: linear-gradient(180deg, var(--card), var(--glass));
            border-radius: var(--radius);
            padding: 18px;
            box-shadow: 0 6px 30px rgba(2, 6, 23, 0.6);
        }

        .modes {
            display: flex;
            gap: 14px
        }

        .mode {
            flex: 1;
            padding: 18px;
            border-radius: 12px;
            background: var(--glass-2);
            cursor: pointer;
            transition: transform .12s ease, box-shadow .12s ease;
            border: 1px solid rgba(255, 255, 255, 0.04)
        }

        .mode:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 30px rgba(2, 6, 23, 0.5)
        }

        .mode.active {
            outline: 3px solid rgba(124, 58, 237, 0.12);
        }

        .mode .title {
            font-weight: 700;
            margin-bottom: 6px
        }

        .mode .desc {
            color: var(--muted);
            font-size: 13px
        }

        .controls {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-top: 12px
        }

        .btn {
            padding: 10px 12px;
            border-radius: 10px;
            background: linear-gradient(90deg, #0ea5e9, var(--accent));
            border: none;
            color: white;
            font-weight: 600;
            cursor: pointer
        }

        .btn.ghost {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.06);
            color: var(--muted)
        }

        .question-area {
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 28px;
            border-radius: 12px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
        }

        .big-question {
            font-size: 36px;
            font-weight: 800;
            letter-spacing: 2px
        }

        .input-row {
            display: flex;
            gap: 8px;
            align-items: center
        }

        input.answer {
            padding: 12px 14px;
            border-radius: 10px;
            border: none;
            font-size: 18px;
            width: 160px;
            text-align: center
        }

        .meta {
            display: flex;
            gap: 10px;
            align-items: center;
            color: var(--muted);
            font-size: 13px
        }

        .stats {
            display: flex;
            gap: 12px;
            flex-wrap: wrap
        }

        .stat {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), transparent);
            padding: 10px;
            border-radius: 10px;
            min-width: 100px;
            text-align: center
        }

        .stat .num {
            font-weight: 800;
            font-size: 18px
        }

        aside .panel {
            position: sticky;
            top: 24px
        }

        .history {
            max-height: 300px;
            overflow: auto;
            margin-top: 12px;
            padding-right: 6px
        }

        .hist-item {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            border-radius: 8px;
            margin-bottom: 6px;
            background: rgba(255, 255, 255, 0.02);
            font-size: 14px
        }

        footer {
            margin-top: 18px;
            color: var(--muted);
            font-size: 13px;
            text-align: center
        }

        /* New enhanced styles */
        .mode .badge {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 4px;
            font-weight: bold
        }

        .silver-badge {
            background: var(--silver);
            color: #1e293b
        }

        .gold-badge {
            background: var(--gold);
            color: #1e293b
        }

        .diamond-badge {
            background: var(--diamond);
            color: #1e293b
        }

        .streak-display {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 4px
        }

        .streak-fire {
            color: #f59e0b;
            font-size: 16px
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 4px
        }

        .timer-bar {
            height: 4px;
            background: var(--accent);
            border-radius: 2px;
            transition: width 1s linear
        }

        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, var(--accent), #3b82f6);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            z-index: 100;
            text-align: center;
            display: none
        }

        .achievement-icon {
            font-size: 48px;
            margin-bottom: 10px
        }

        .progress-container {
            margin-top: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 8px
        }

        .progress-bar {
            height: 8px;
            background: var(--accent);
            border-radius: 4px;
            transition: width 0.3s ease
        }

        .hint-box {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
            display: none
        }

        .hint-title {
            font-weight: bold;
            margin-bottom: 6px
        }

        .level-progress {
            display: flex;
            justify-content: space-between;
            margin-top: 12px;
            font-size: 12px;
            color: var(--muted)
        }

        /* responsive */
        @media (max-width:900px) {
            .grid {
                grid-template-columns: 1fr;
            }

            aside {
                order: 2
            }
        }
    </style>
</head>

<body>
    <div class="wrap">
        <header>
            <div class="brand">
                <div class="logo">FM</div>
                <div>
                    <h1>Fast &amp; Furious Math</h1>
                    <p class="lead">Design Gold / Silver / Diamond questions, train speed and curiosity — perfect for
                        Class 9.</p>
                </div>
            </div>
            <div style="text-align:right">
                <div style="color:var(--muted);font-size:13px">Teacher mode • Local save</div>
                <div style="font-size:12px;color:var(--muted)">Tip: use Diamond for competitions</div>
            </div>
        </header>

        <div class="grid">
            <main class="panel">
                <div class="modes">
                    <div class="mode" id="silver" data-level="silver" tabindex="0">
                        <div class="title">Silver <span class="badge silver-badge">EASY</span></div>
                        <div class="desc">Practice speed — 1–2 digit × 1 digit. Build confidence.</div>
                        <div style="margin-top:8px" class="meta"><strong>Examples:</strong>&nbsp;23 × 4, 12 × 7</div>
                        <div class="level-progress">
                            <span>Progress: <span id="silver-progress">0%</span></span>
                            <span>Best streak: <span id="silver-streak">0</span></span>
                        </div>
                    </div>

                    <div class="mode active" id="gold" data-level="gold" tabindex="0">
                        <div class="title">Gold <span class="badge gold-badge">MEDIUM</span></div>
                        <div class="desc">Standard challenge — 2-digit × 2-digit. Perfect for fast methods.</div>
                        <div style="margin-top:8px" class="meta"><strong>Examples:</strong>&nbsp;23 × 12, 45 × 17</div>
                        <div class="level-progress">
                            <span>Progress: <span id="gold-progress">0%</span></span>
                            <span>Best streak: <span id="gold-streak">0</span></span>
                        </div>
                    </div>

                    <div class="mode" id="diamond" data-level="diamond" tabindex="0">
                        <div class="title">Diamond <span class="badge diamond-badge">HARD</span></div>
                        <div class="desc">Advanced — 3-digit × 2-digit or near-round numbers for tricks.</div>
                        <div style="margin-top:8px" class="meta"><strong>Examples:</strong>&nbsp;199 × 12, 305 × 87
                        </div>
                        <div class="level-progress">
                            <span>Progress: <span id="diamond-progress">0%</span></span>
                            <span>Best streak: <span id="diamond-streak">0</span></span>
                        </div>
                    </div>
                </div>

                <div class="controls">
                    <button class="btn" id="newQ">New Question</button>
                    <button class="btn ghost" id="hintBtn">Show Hint</button>
                    <label style="margin-left:auto;display:flex;align-items:center;gap:6px;color:var(--muted)"><input
                            type="checkbox" id="fastMode"> Fast Mode (10s)</label>
                </div>

                <section class="question-area" id="qArea" aria-live="polite">
                    <div style="display:flex;gap:12px;align-items:center;justify-content:center;flex-wrap:wrap;">
                        <div class="big-question" id="question">23 × 12</div>
                        <div class="meta"> = </div>
                        <div class="input-row">
                            <input class="answer" id="answer" inputmode="numeric" autocomplete="off"
                                placeholder="Your answer" />
                            <button class="btn" id="check">Check</button>
                        </div>
                    </div>

                    <div class="meta">
                        <div class="timer-container">
                            Time left: <span id="timer">—</span>
                            <div style="flex:1;max-width:100px;background:rgba(255,255,255,0.1);border-radius:2px;">
                                <div class="timer-bar" id="timer-bar" style="width:100%"></div>
                            </div>
                        </div>
                        <div class="streak-display">
                            Streak: <span id="streak">0</span>
                            <span class="streak-fire" id="streak-fire" style="display:none">🔥</span>
                        </div>
                    </div>

                    <div class="stats" style="margin-top:12px">
                        <div class="stat">
                            <div class="num" id="score">0</div>
                            <div class="muted">Score</div>
                        </div>
                        <div class="stat">
                            <div class="num" id="total">0</div>
                            <div class="muted">Attempted</div>
                        </div>
                        <div class="stat">
                            <div class="num" id="accuracy">0%</div>
                            <div class="muted">Accuracy</div>
                        </div>
                    </div>

                    <div class="progress-container">
                        <div style="display:flex;justify-content:space-between;font-size:12px;margin-bottom:4px">
                            <span>Level Progress</span>
                            <span id="level-percent">0%</span>
                        </div>
                        <div style="background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden">
                            <div class="progress-bar" id="level-progress" style="width:0%"></div>
                        </div>
                    </div>
                </section>

                <div class="hint-box" id="hintBox">
                    <div class="hint-title">Hint</div>
                    <div id="hintText">Break the larger number: e.g. 23×4 = (20×4)+(3×4) = 80+12 = 92</div>
                </div>

                <div style="margin-top:14px;color:var(--muted);font-size:13px">
                    Use this landing as an in-class challenge: announce category and time, give points for speed. Save
                    results locally or export for records.
                </div>

                <footer>
                    Built for curious learners — tweak numbers, add more tricks, or copy into your classroom portal.
                </footer>
            </main>

            <aside class="panel">
                <div style="display:flex;justify-content:space-between;align-items:center">
                    <strong>Session</strong>
                    <div style="display:flex;gap:8px">
                        <button class="btn ghost" id="reset">Reset</button>
                        <button class="btn" id="export">Export CSV</button>
                    </div>
                </div>

                <div style="margin-top:12px;font-size:13px;color:var(--muted)">History</div>
                <div class="history" id="history"></div>

                <div style="margin-top:12px">
                    <div style="font-weight:700">Teacher settings</div>
                    <div style="margin-top:8px;color:var(--muted);font-size:13px">Customize question counts and time per
                        question for each category.</div>
                    <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
                        <label style="font-size:13px;color:var(--muted)">Silver Qs <input type="number" id="silverCount"
                                value="10" min="1"
                                style="width:80px;margin-left:6px;padding:6px;border-radius:6px;border:none"></label>
                        <label style="font-size:13px;color:var(--muted)">Gold Qs <input type="number" id="goldCount"
                                value="10" min="1"
                                style="width:80px;margin-left:6px;padding:6px;border-radius:6px;border:none"></label>
                        <label style="font-size:13px;color:var(--muted)">Diamond Qs <input type="number"
                                id="diamondCount" value="5" min="1"
                                style="width:80px;margin-left:6px;padding:6px;border-radius:6px;border:none"></label>
                    </div>
                    <div style="margin-top:10px">
                        <label style="font-size:13px;color:var(--muted)">Time per question (seconds) <input
                                type="number" id="timePerQuestion" value="10" min="5" max="60"
                                style="width:80px;margin-left:6px;padding:6px;border-radius:6px;border:none"></label>
                    </div>
                </div>

                <div style="margin-top:12px;color:var(--muted);font-size:13px">
                    Session data is stored in your browser (localStorage). Use Export CSV to save results for reports.
                </div>
            </aside>
        </div>
    </div>

    <div class="achievement-popup" id="achievementPopup">
        <div class="achievement-icon">🏆</div>
        <div style="font-weight:bold;font-size:18px" id="achievementTitle">Achievement Unlocked!</div>
        <div id="achievementDesc">You've reached a new milestone!</div>
        <button class="btn" style="margin-top:10px" id="closeAchievement">Continue</button>
    </div>

    <script>
        // Utility & state
        const modes = {
            silver: { minA: 2, maxA: 99, minB: 2, maxB: 9, points: 7, color: '#9ca3af', name: 'Silver' },
            gold: { minA: 10, maxA: 99, minB: 10, maxB: 99, points: 15, color: '#f59e0b', name: 'Gold' },
            diamond: { minA: 100, maxA: 999, minB: 10, maxB: 99, points: 30, color: '#06b6d4', name: 'Diamond' }
        };

        let active = 'gold';
        let current = null; // {a,b,answer,level}
        let timerInterval = null;
        let timeLeft = 0;
        let totalTime = 10;
        let streak = 0;
        let score = 0;
        let attempted = 0;
        let history = JSON.parse(localStorage.getItem('ffm_history') || '[]');
        let levelStats = JSON.parse(localStorage.getItem('ffm_levelStats') || '{}');

        // Initialize level stats if not present
        if (!levelStats.silver) levelStats.silver = { correct: 0, total: 0, bestStreak: 0 };
        if (!levelStats.gold) levelStats.gold = { correct: 0, total: 0, bestStreak: 0 };
        if (!levelStats.diamond) levelStats.diamond = { correct: 0, total: 0, bestStreak: 0 };

        // DOM
        const el = id => document.getElementById(id);
        const modeEls = document.querySelectorAll('.mode');

        function pickRange(level) {
            const r = modes[level];
            function rnd(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min }
            // For variety, sometimes produce near-round numbers for diamond
            let a = rnd(r.minA, r.maxA);
            let b = rnd(r.minB, r.maxB);
            if (level === 'diamond' && Math.random() > 0.6) {
                // create near-round trick numbers like 199, 201, 305
                if (Math.random() > 0.5) a = Math.round((a / 10)) * 10 - (Math.random() > 0.5 ? 1 : -1);
            }
            return [a, b];
        }

        function newQuestion(fromButton = false) {
            const [a, b] = pickRange(active);
            current = { a, b, answer: a * b, level: active, ts: Date.now() };
            el('question').textContent = `${a} × ${b}`;
            el('answer').value = '';
            el('answer').focus();
            el('hintBox').style.display = 'none';

            if (el('fastMode').checked) {
                totalTime = parseInt(el('timePerQuestion').value) || 10;
                startTimer(totalTime);
            } else {
                el('timer').textContent = '—';
                el('timer-bar').style.width = '100%';
                stopTimer();
            }
            if (!fromButton) saveState();
        }

        function checkAnswer() {
            if (!current) return;
            const val = parseInt(el('answer').value.replace(/[^0-9-]/g, ''), 10);
            const correct = val === current.answer;
            attempted++;

            // Update level stats
            levelStats[current.level].total++;
            if (correct) {
                streak++;
                score += modes[current.level].points;
                levelStats[current.level].correct++;

                // Update best streak
                if (streak > levelStats[current.level].bestStreak) {
                    levelStats[current.level].bestStreak = streak;
                }

                // Show streak fire for streaks of 5 or more
                if (streak >= 5) {
                    el('streak-fire').style.display = 'inline';
                }

                // Check for achievements
                checkAchievements();
            } else {
                streak = 0;
                el('streak-fire').style.display = 'none';
            }

            history.unshift({ q: `${current.a}×${current.b}`, ans: val, correct, expected: current.answer, level: current.level, ts: Date.now() });
            updateUI();
            saveState();

            // flash feedback
            el('question').style.transition = 'transform .12s ease';
            el('question').style.transform = correct ? 'scale(1.06)' : 'scale(.96)';
            setTimeout(() => el('question').style.transform = 'scale(1)', 150);

            // auto new question
            setTimeout(() => newQuestion(), 350);
        }

        function updateUI() {
            el('streak').textContent = streak;
            el('score').textContent = score;
            el('total').textContent = attempted;
            el('accuracy').textContent = attempted ? Math.round((history.filter(h => h.correct).length / attempted) * 100) + '%' : '0%';

            // Update level progress
            for (const level in modes) {
                const progress = levelStats[level].total > 0 ?
                    Math.round((levelStats[level].correct / levelStats[level].total) * 100) : 0;
                el(`${level}-progress`).textContent = `${progress}%`;
                el(`${level}-streak`).textContent = levelStats[level].bestStreak;
            }

            // Update overall level progress
            const totalCorrect = levelStats.silver.correct + levelStats.gold.correct + levelStats.diamond.correct;
            const totalQuestions = levelStats.silver.total + levelStats.gold.total + levelStats.diamond.total;
            const overallProgress = totalQuestions > 0 ? Math.round((totalCorrect / totalQuestions) * 100) : 0;
            el('level-percent').textContent = `${overallProgress}%`;
            el('level-progress').style.width = `${overallProgress}%`;

            renderHistory();
        }

        function renderHistory() {
            const h = el('history'); h.innerHTML = '';
            history.slice(0, 40).forEach(item => {
                const d = new Date(item.ts);
                const div = document.createElement('div'); div.className = 'hist-item';
                div.innerHTML = `<div><strong>${item.q}</strong> <span style="color:var(--muted);font-size:12px">= ${item.expected}</span></div><div style="text-align:right"><div style="font-weight:700;color:${item.correct ? 'var(--diamond)' : '#ff6b6b'}">${item.correct ? '✓' : '✗'}</div><div style="font-size:11px;color:var(--muted)">${d.toLocaleTimeString()}</div></div>`;
                h.appendChild(div);
            });
        }

        function saveState() {
            const st = { history, score, attempted, streak };
            localStorage.setItem('ffm_history', JSON.stringify(history.slice(0, 2000)));
            localStorage.setItem('ffm_stats', JSON.stringify({ score, attempted, streak }));
            localStorage.setItem('ffm_levelStats', JSON.stringify(levelStats));
        }

        function loadState() {
            const stats = JSON.parse(localStorage.getItem('ffm_stats') || '{}');
            score = stats.score || 0; attempted = stats.attempted || 0; streak = stats.streak || 0;

            const savedLevelStats = JSON.parse(localStorage.getItem('ffm_levelStats') || '{}');
            if (savedLevelStats.silver) levelStats.silver = { ...levelStats.silver, ...savedLevelStats.silver };
            if (savedLevelStats.gold) levelStats.gold = { ...levelStats.gold, ...savedLevelStats.gold };
            if (savedLevelStats.diamond) levelStats.diamond = { ...levelStats.diamond, ...savedLevelStats.diamond };

            updateUI();
        }

        function startTimer(seconds) {
            stopTimer();
            timeLeft = seconds;
            totalTime = seconds;
            el('timer').textContent = timeLeft + 's';
            el('timer-bar').style.width = '100%';

            timerInterval = setInterval(() => {
                timeLeft--;
                el('timer').textContent = timeLeft + 's';
                el('timer-bar').style.width = `${(timeLeft / totalTime) * 100}%`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                    // count as wrong if not answered
                    attempted++;
                    history.unshift({ q: `${current.a}×${current.b}`, ans: null, correct: false, expected: current.answer, level: current.level, ts: Date.now() });
                    streak = 0;
                    updateUI();
                    saveState();
                    newQuestion();
                }
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function checkAchievements() {
            let achievement = null;

            // Streak achievements
            if (streak === 5) {
                achievement = { title: "Hot Streak!", desc: "5 correct answers in a row!" };
            } else if (streak === 10) {
                achievement = { title: "Math Wizard!", desc: "10 correct answers in a row!" };
            } else if (streak === 20) {
                achievement = { title: "Math Genius!", desc: "20 correct answers in a row!" };
            }

            // Level completion achievements
            if (levelStats[active].correct === 10) {
                achievement = { title: `${modes[active].name} Master!`, desc: `Completed 10 ${modes[active].name} level questions!` };
            } else if (levelStats[active].correct === 25) {
                achievement = { title: `${modes[active].name} Expert!`, desc: `Completed 25 ${modes[active].name} level questions!` };
            }

            // Score achievements
            if (score >= 100 && score < 200) {
                achievement = { title: "Century Score!", desc: "Reached 100 points!" };
            } else if (score >= 500) {
                achievement = { title: "Half Grand!", desc: "Reached 500 points!" };
            }

            if (achievement) {
                showAchievement(achievement.title, achievement.desc);
            }
        }

        function showAchievement(title, desc) {
            el('achievementTitle').textContent = title;
            el('achievementDesc').textContent = desc;
            el('achievementPopup').style.display = 'block';
        }

        // event bindings
        modeEls.forEach(m => m.addEventListener('click', () => {
            modeEls.forEach(x => x.classList.remove('active'));
            m.classList.add('active');
            active = m.dataset.level;
            newQuestion(true);
        }));

        el('newQ').addEventListener('click', () => newQuestion(true));
        el('check').addEventListener('click', checkAnswer);
        el('answer').addEventListener('keydown', (e) => { if (e.key === 'Enter') checkAnswer(); });
        el('reset').addEventListener('click', () => {
            if (confirm('Reset session data? This clears history and stats.')) {
                history = [];
                score = 0;
                attempted = 0;
                streak = 0;
                levelStats = {
                    silver: { correct: 0, total: 0, bestStreak: 0 },
                    gold: { correct: 0, total: 0, bestStreak: 0 },
                    diamond: { correct: 0, total: 0, bestStreak: 0 }
                };
                saveState();
                updateUI();
                newQuestion(true);
            }
        });

        el('export').addEventListener('click', () => {
            const rows = [['question', 'given', 'expected', 'correct', 'level', 'ts']].concat(history.map(h => [h.q, h.ans === null ? '' : h.ans, h.expected, h.correct, h.level, new Date(h.ts).toISOString()]));
            const csv = rows.map(r => r.map(c => '"' + String(c).replace(/"/g, '""') + '"').join(',')).join('\n');
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a'); a.href = url; a.download = 'ffm_session.csv'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
        });

        el('hintBtn').addEventListener('click', () => {
            if (!current) return alert('Generate a question first.');
            const a = current.a, b = current.b;
            // provide mental math hint for multiplication
            let hint = '';
            if (a < 100 && b < 10) {
                hint = `Break the larger number: ${a}×${b} = (${Math.floor(a / 10) * 10}×${b}) + (${a % 10}×${b}) = ${Math.floor(a / 10) * 10 * b} + ${(a % 10) * b} = ${a * b}`;
            }
            else if (a < 100 && b < 100) {
                hint = `Use column method or split: ${a}×${b} = ${a}×${Math.floor(b / 10) * 10} + ${a}×${b % 10} = ${a * Math.floor(b / 10) * 10} + ${a * (b % 10)} = ${a * b}`;
            }
            else {
                hint = `Round & compensate: ${a}×${b} = (${Math.round(a / 10) * 10}×${b}) ${a < Math.round(a / 10) * 10 ? '-' : '+'} ${Math.abs(a - Math.round(a / 10) * 10) * b} = ${Math.round(a / 10) * 10 * b} ${a < Math.round(a / 10) * 10 ? '-' : '+'} ${Math.abs(a - Math.round(a / 10) * 10) * b} = ${a * b}`;
            }
            el('hintText').textContent = hint;
            el('hintBox').style.display = 'block';
        });

        el('closeAchievement').addEventListener('click', () => {
            el('achievementPopup').style.display = 'none';
        });

        // keyboard quick select
        document.addEventListener('keydown', (e) => {
            if (e.key === '1') document.getElementById('silver').click();
            if (e.key === '2') document.getElementById('gold').click();
            if (e.key === '3') document.getElementById('diamond').click();
            if (e.key === 'n') el('newQ').click();
            if (e.key === 'h') el('hintBtn').click();
        });

        // init
        loadState();
        renderHistory();
        newQuestion();

    </script>
</body>

</html>